{% load i18n %}
{% load static %}
{% load custom_tags %}
    <aside class="sidebar">
        <div class="sidebar-toggle"><i class="icon icon-sidebar-right"></i><i class="icon icon-sidebar-left"></i></div>
        <div class="sidebar-logo">
            <div class="sidebar-logo-main-part"></div>
            <div class="sidebar-logo-second-part"></div>
            <div class="sidebar-logo-large-parts">
                <img src="{% static 'go/images/half-o.png' %}">
                <img src="{% static 'go/images/o.png' %}">
            </div>
        </div>
        <div class="sidebar-navs">
            <ul class="sidebar-nav">
                <li class="active"><a href="/{{dil}}/"><i class="icon icon-dashboard"></i> <span>{% trans 'Dashboard' %}</span> </a></li>
                {% if request.user.is_superuser %}
                <li>
                    <a class="sidebar-sub-toggle" href="#"><i class="icon icon-super-admin"></i> <span>{% trans 'Super
                            Admin' %}</span> <i class="icon icon-caret"></i></a>
                    <ul class="sidebar-sub-menu">
                        <li><a href="/{{dil}}{% url 'main:santiye_ekle' %}" class="sidebar-sub-item">{% trans 'Şantiye Ekle' %}</a></li>
                        <li><a href="/{{dil}}{% url 'main:santiye_listele' %}" class="sidebar-sub-item">{% trans 'Şantiye Ayarları' %}</a></li>
                        <li><a href="/{{dil}}{% url 'main:site_ayarlari' %}" class="sidebar-sub-item">{% trans 'Sistem Ayarları' %}</a></li>
                        <li><a href="/{{dil}}{% url 'main:dil_ayari_listele' %}" class="sidebar-sub-item">{% trans 'Dil Ayarları' %}</a></li>

                    </ul>
                </li>
                    {% else %}
                        {% endif %}
                <li>
                    <a class="sidebar-sub-toggle" href="#"><i class="icon icon-document"></i> <span>Raporlar</span> <i class="icon icon-caret"></i></a>
                    <ul class="sidebar-sub-menu">
                        <li><a href="#" class="sidebar-sub-item">{% trans 'Şantiye Raporları' %}</a></li>
                        <li>
                            <a class="sidebar-sub-toggle" href="#"><span>{% trans 'Finans Raporları' %}</span> <i
                                    class="icon icon-caret"></i></a>
                            <ul class="sidebar-sub-menu">
                                <li><a href="/{{dil}}{% url 'accounting:gelirler_ozeti' %}" class="sidebar-sub-item">{% trans 'Gelir Raporu ' %}</a></li>
                                <li><a href="/{{dil}}{% url 'accounting:giderler_ozeti' %}" class="sidebar-sub-item">{% trans 'Gider Raporu ' %}</a></li>
                                <li><a href="/{{dil}}{% url 'accounting:hesap_ekstra_durumu' %}" class="sidebar-sub-item">{% trans 'Hesap Ekstresi ' %}</a></li>
                                <li><a href="/{{dil}}{% url 'accounting:virman_gondermeler' %}" class="sidebar-sub-item">{% trans 'Virman Raporu ' %}</a></li>

                            </ul>
                        </li>
                    </ul>
                </li>
                
                <li><a class="sidebar-sub-toggle" href="#"><i class="icon icon-santiye-yonetimi"></i> <span>{% trans 'Şantiye Yönetimi' %}</span> <i class="icon icon-caret"></i></a>
                    <ul class="sidebar-sub-menu">
                        <li><a href="/{{dil}}{% url 'main:santiye_kalem_ve_blog' %}" class="sidebar-sub-item">{% trans 'Proje Yönetimi' %}</a></li>
                        <li><a href="/{{dil}}{% url 'main:yapilacaklar' %}" class="sidebar-sub-item">{% trans 'Görevler' %}</a></li>
                        <li><a href="/{{dil}}{% url 'main:depolama_sistemim' %}" class="sidebar-sub-item">{% trans 'Dosya Yöneticisi' %}</a></li>
                        <li><a href="/{{dil}}{% url 'main:taseron_sayfasi' %}" class="sidebar-sub-item">{% trans 'Taşeronlar' %}</a></li>

                    </ul>
                </li>
                <li><a href="#"><i class="icon icon-muhasebe"></i> <span>Muhasebe</span> </a></li>
                <li><a href="#"><i class="icon icon-profile"></i> <span>Personel</span> </a></li>
                <li><a href="#"><i class="icon icon-stok"></i> <span>Satın Alma ve Stok</span> </a></li>
                <li><a href="#"><i class="icon icon-users"></i> <span>Kullanıcılar</span> </a></li>
            </ul>
            <hr>
            <ul class="sidebar-nav">
                <li><a href="#"><i class="icon icon-notifications"></i> <span>Bildirimler</span> </a></li>
                <li><a href="#"><i class="icon icon-settings"></i> <span>Ayarlar</span> </a></li>
                <li><a href="#"><i class="icon icon-help"></i> <span>Destek ve Yardım</span> </a></li>
            </ul>
        </div>
    </aside>

    <div class="sidebar-mobile-toggle">
        <img src="{% static 'go/images/logo-sm.png' %}" class="sidebar-mobile-sm-logo" alt="" />
        <i class="icon icon-chevron-right"></i>
    </div>

    <script>
        let sidebar = document.querySelector(".sidebar");
        let sidebarToggle = document.querySelector(".sidebar-toggle");
        let sidebarMobileToggle = document.querySelector(".sidebar-mobile-toggle");
        sidebarToggle.addEventListener("click", function () {
            sidebar.classList.toggle("sidebar-collapsed");
        })
        sidebarMobileToggle.addEventListener("click", function () {
            sidebar.classList.toggle("sidebar-collapsed");
        })

        $('.sidebar-sub-toggle').click(function () {
            $(this).next('.sidebar-sub-menu').slideToggle();
            $(this).next('.sidebar-sub-menu').toggleClass("open");
            $(this).find('.icon-caret').toggleClass('rotate');
        });
    </script>

    <header>
        <div class="header-search">
            <input type="search" name="search" id="search" placeholder="Uygulama içerisinde ara">
            <button><i class="icon icon-search"></i></button>
        </div>
        <div class="header-actions">
            <div class="header-actions-dropdown">
                <a href="#"><i class="icon icon-dashboard"></i></a>
                <div class="actions-dropdown-content">
                    <div class="actions-dropdown-content-title">
                        Web Apps
                    </div>
                    <div class="actions-dropdown-content-apps">
                        <a href="#" class="adc-app">
                            <div class="adc-app-icon">
                                <img src="{% static 'go/images/google-play.png' %}" alt="Google Play">
                            </div>
                            <div class="adc-app-title">Android</div>
                        </a>
                        <a href="#" class="adc-app">
                            <div class="adc-app-icon">
                                <img src="{% static 'go/images/appstore.png' %}" alt="App Store">
                            </div>
                            <div class="adc-app-title">IOS</div>
                        </a>
                    </div>
                </div>
            </div>
            <a href="#" onclick="toggleFullScreen()"><i class="icon icon-fullscreen"></i></a>
            <a href="#"><i class="icon icon-moon"></i></a>
            <div class="header-actions-dropdown notifications-dropdown">
                <a href="#"><i class="icon icon-notification"></i></a>
                <div class="actions-dropdown-content">
                    <div class="actions-dropdown-content-title">
                        Bildirimler
                        <span>12 adet yeni bildiriminiz var.</span>
                    </div>
                    <div class="notifications-tabs">
                        <button onclick="notificationTab(event, 'notification-all')"
                            class="notification-tab-btn active">Hepsi
                            <span>22</span></button>
                        <button onclick="notificationTab(event, 'notification-unread')"
                            class="notification-tab-btn">Okunmamış <span>3</span></button>
                    </div>
                    <div class="notifications" id="notification-all">
                        <div class="notification">
                            <div class="notification-avatar">
                                <img src="{% static 'go/images/avatar-2.png' %}" alt="Avatar">
                            </div>
                            <div class="notification-content notification-unread">
                                <div class="notification-title">tolga_info@biadagroup.com</div>
                                <div class="notification-subtitle">site_info - klasörler</div>
                                <div class="notification-date">07 Ağustos 2024 • 09:36</div>
                                <div class="notification-actions">
                                    <button class="notification-inspect-button">İncele</button>
                                    <button class="notification-confirm-button">Onayla</button>
                                </div>
                            </div>
                        </div>
                        <div class="notification">
                            <div class="notification-avatar">
                                <img src="{% static 'go/images/avatar-2.png' %}" alt="Avatar">
                            </div>
                            <div class="notification-content notification-unread">
                                <div class="notification-title">tolga_info@biadagroup.com</div>
                                <div class="notification-subtitle">site_info - klasörler</div>
                                <div class="notification-date">07 Ağustos 2024 • 09:36</div>
                                <div class="notification-actions">
                                    <button class="notification-inspect-button">İncele</button>
                                    <button class="notification-confirm-button">Onayla</button>
                                </div>
                            </div>
                        </div>
                        <div class="notification">
                            <div class="notification-avatar">
                                <img src="{% static 'go/images/avatar-2.png' %}" alt="Avatar">
                            </div>
                            <div class="notification-content notification-unread">
                                <div class="notification-title notification-title-success">Görevinizi tamamladınız</div>
                                <div class="notification-date">07 Ağustos 2024 • 09:36</div>
                            </div>
                        </div>
                        <div class="notification">
                            <div class="notification-avatar">
                                <img src="{% static 'go/images/avatar-2.png' %}" alt="Avatar">
                            </div>
                            <div class="notification-content notification-unread">
                                <div class="notification-title notification-title-danger">Ödeme tarihini geçen bir
                                    faturanız bulunmaktadır.</div>
                                <div class="notification-date">07 Ağustos 2024 • 09:36</div>
                                <div class="notification-actions">
                                    <button class="notification-inspect-button">İncele</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="notifications" id="notification-unread" style="display: none;">
                        <div class="notification">
                            <div class="notification-avatar">
                                <img src="{% static 'go/images/avatar-2.png' %}" alt="Avatar">
                            </div>
                            <div class="notification-content notification-unread">
                                <div class="notification-title">tolga_info@biadagroup.com</div>
                                <div class="notification-subtitle">site_info - klasörler</div>
                                <div class="notification-date">07 Ağustos 2024 • 09:36</div>
                                <div class="notification-actions">
                                    <button class="notification-inspect-button">İncele</button>
                                    <button class="notification-confirm-button">Onayla</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <script>
                        function notificationTab(e, id) {
                            var i, x, notificationTabBtn;
                            x = document.getElementsByClassName("notifications");
                            for (i = 0; i < x.length; i++) {
                                x[i].style.display = "none";
                            }
                            notificationTabBtn = document.getElementsByClassName("notification-tab-btn");
                            for (i = 0; i < x.length; i++) {
                                notificationTabBtn[i].className = notificationTabBtn[i].className.replace(" active", "");
                            }
                            document.getElementById(id).style.display = "block";
                            e.currentTarget.className += " active";
                        }
                    </script>

                    <div class="notifications-footer">
                        <a href="#">Tümünü Gör <i class="icon icon-forward"></i></a>
                    </div>
                </div>
            </div>
        </div>
         <div class="header-language-wrapper">
            <div class="header-language">
            {% for i in diller  %}
                            {% if i.dil_kisaltması == dil %}
                <img id="" src="{{i.dil_bayragi_icon.url}}" alt="Header Language" height="20" class="header-language-flag">
                <span>Türkçe</span>
                <i class="icon icon-chevron-bottom"></i>
                  {% else %}
                            {% endif %}
                        {% endfor %}
            </div>
            <div class="header-language-dropdown">
            {% get_current_language as LANGUAGE_CODE %}
                    {% get_available_languages as LANGUAGES %}
                    {% get_language_info_list for LANGUAGES as languages %}

                    {% for lang in languages %}
                        {% for i in diller  %}
                            {% if i.dil_kisaltması == lang.code %}
                <div class="language-selector">
                    <a href="/{{ lang.code }}/{{linki}}" data-lang="{{ lang.code }}" title="{{ lang.name_local }}">
                                <img src="{{i.dil_bayragi_icon.url}}" alt="TR" height="18px">
                                <span>{{ lang.name_local }}</span>
                                </a>
                    
                </div>
                    {% else %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
            </div>
        </div>
        <div class="header-profile-wrapper">
            <div class="header-profile">
                <div class="profile-avatar">
                    <img src="{% static 'go/images/avatar.png' %}" alt="Avatar">
                    
                </div>
                <div class="profile-title">
                    <span>{% trans 'Hoşgeldin' %} 👋</span>
                    {{request.user.last_name}}
                </div>
                <i class="icon icon-chevron-bottom"></i>
            </div>
            <div class="header-profile-dropdown">
                <div class="profile-dropdown-title">
                    {{request.user.last_name}}
                    <span>{{request.user.first_name}}</span>
                </div>
                <div class="profile-dropdown-actions">
                   <a href="/{{dil}}{% url 'user:profil_bilgisi' %}"><i class="icon icon-profile"></i> {% trans 'Profil' %}</a>
                    <a href="/{{dil}}{% url 'users:profile_edit_kismi' %}"><i class="icon icon-settings"></i> {% trans 'Ayarlar' %}</a>
                    <a href="/{{dil}}{% url 'users:unlock' %}"><i class="icon icon-lock"></i> {% trans 'Ekranı kilitle' %}</a>
                </div>
                <div class="profile-dropdown-logout">
                    <a href="/{{dil}}{% url 'users:logout' %}">{% trans 'Çıkış yap' %}</a>
                </div>
            </div>
        </div>
    </header>