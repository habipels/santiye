{% extends "homebase.html" %}
{% load i18n %}
{% load static %}
{% load custom_tags %}
{% block sidebar %}
{% if hash_bilgi %}

    <main>

        <div class="quick-actions">
            <div class="quick-actions-header">
                <div class="quick-actions-title">{% trans 'Hızlı Menü' %}</div>
                <div class="quick-actions-right">
                    <button class="quick-actions-add" onclick="showHiddenActions()">
                        <i class="icon icon-add"></i> {% trans 'Gizli Öğeler' %}
                    </button>
                    <div class="quick-actions-toggle">
                        <i class="icon icon-arrow-circle-up"></i>
                        <i class="icon icon-arrow-circle-down"></i>
                    </div>
                </div>
            </div>
            <div class="quick-actions-body open">
                <div class="quick-actions-inner">
                    <div class="quick-actions-grid" id="quick-actions-grid">
                        <a href="#" class="quick-action" data-id="1" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-document"></i> {% trans 'Raporlar' %}</a>
                        <a href="#" class="quick-action" data-id="2" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-ilerleme-takibi"></i>{% trans 'İlerleme Takibi' %} </a>
                        <a href="#" class="quick-action" data-id="3" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-giderler"></i> {% trans 'Giderler' %}</a>
                        <a href="#" class="quick-action" data-id="4" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-gelirler"></i>{% trans 'Gelirler' %} </a>
                        <a href="#" class="quick-action" data-id="5" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-muhasebe"></i>{% trans 'Borçlar' %} </a>
                        <a href="#" class="quick-action" data-id="6" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-puantaj-girisi"></i>{% trans 'Puantaj Girişi' %}</a>
                        <a href="#" class="quick-action" data-id="7" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-satin-alma"></i>{% trans 'Satın Alma' %}</a>
                        <a href="#" class="quick-action" data-id="8" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-yeni-personel"></i>{% trans 'Personel Ekle' %} </a>
                        <a href="#" class="quick-action" data-id="9" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-yeni-kullanici"></i> {% trans 'Kullanıcı Ekle' %}</a>
                        <a href="#" class="quick-action" data-id="10" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-dosya-yoneticisi"></i>{% trans 'Dosya Yöneticisi' %} </a>
                        <a href="#" class="quick-action" data-id="11" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-taseronlar"></i> {% trans 'Taşeronlar' %}</a>
                        <a href="#" class="quick-action" data-id="12" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-sozlesmeler"></i> {% trans 'Sözleşmeler' %}</a>
                        <a href="#" class="quick-action" data-id="13" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-hakedisler"></i> {% trans 'Hakedişler' %}</a>
                        <a href="#" class="quick-action" data-id="14" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-gorevler"></i> {% trans 'İş Emirleri' %}</a>
                        <a href="#" class="quick-action" data-id="15" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-kasa"></i> {% trans 'Kasa' %}</a>
                        <a href="#" class="quick-action" data-id="16" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-users"></i> {% trans 'Cari Hesapları' %}</a>
                    </div>
                </div>
            </div>
        </div>


        <div class="quick-action-modal " id="hiddenLinksModal">
            <div class="quick-action-modal-content">
                <div class="quick-action-modal-header">
                    <span>{% trans 'Gizli Öğeler' %}</span>
                    <button onclick="hideHiddenActions()"><i class="icon icon-close"></i></button>
                </div>
                <div class="quick-actions-grid modal-body">
                </div>
            </div>
        </div>

        <script>

            const hiddenLinksModalBody = document.querySelector('#hiddenLinksModal .modal-body');
            document.addEventListener('DOMContentLoaded', function () {
                const quickLinks = document.getElementById('quick-actions-grid');
                const hiddenLinksModalBody = document.querySelector('#hiddenLinksModal .modal-body');

                // Hızlı linkleri sürükle-bırak düzenleme
                new Sortable(quickLinks, {
                    animation: 150,
                    handle: '.quick-action',
                    onEnd: function (evt) {
                        const items = Array.from(quickLinks.children);
                        const order = items.map(item => item.dataset.id);
                        sessionStorage.setItem('quickLinksOrder', JSON.stringify(order));
                    }
                });


                // Gizli linkleri modalda geri getirme
                hiddenLinksModalBody.addEventListener('click', function (event) {
                    const link = event.target.closest('.hidden-link');
                    if (link) {
                        const id = link.dataset.id;
                        const hiddenItem = document.querySelector(`[data-id="${id}"]`);
                        if (hiddenItem) {
                            hiddenItem.style.display = "flex"; // Linki geri görünür yap
                            quickLinks.appendChild(hiddenItem); // Sayfaya geri ekle
                            link.remove(); // Modaldan kaldır
                            saveHiddenLinks(); // Gizli linklerin durumunu kaydet
                        }
                    }
                });

                // Oturum açıldığında kullanıcı düzenini yükle
                const savedQuickLinksOrder = JSON.parse(sessionStorage.getItem('quickLinksOrder'));
                if (savedQuickLinksOrder) {
                    savedQuickLinksOrder.forEach(id => {
                        const item = quickLinks.querySelector(`[data-id='${id}']`);
                        if (item) {
                            quickLinks.appendChild(item);
                        }
                    });
                }

                // Gizli linklerin durumunu kaydet
                function saveHiddenLinks() {
                    const hiddenLinks = Array.from(hiddenLinksModalBody.querySelectorAll('.hidden-link')).map(link => link.dataset.id);
                    sessionStorage.setItem('hiddenLinks', JSON.stringify(hiddenLinks));
                }

                // Gizli linkleri yükleme
                function loadHiddenLinks() {
                    const hiddenLinks = JSON.parse(sessionStorage.getItem('hiddenLinks'));
                    if (hiddenLinks) {
                        hiddenLinks.forEach(id => {
                            const item = quickLinks.querySelector(`[data-id='${id}']`);
                            if (item) {
                                item.style.display = "none"; // Linki gizle
                                const hiddenLink = document.createElement('div');
                                hiddenLink.className = 'hidden-link';
                                hiddenLink.dataset.id = id;
                                hiddenLink.innerHTML = item.innerHTML;
                                hiddenLinksModalBody.appendChild(hiddenLink);
                            }
                        });
                    }
                }

                loadHiddenLinks(); // Gizli linkleri sayfa yüklendiğinde çağır
            });

            // Gizli linklerin durumunu kaydet
            function saveHiddenLinks() {
                const hiddenLinks = Array.from(hiddenLinksModalBody.querySelectorAll('.hidden-link')).map(link => link.dataset.id);
                sessionStorage.setItem('hiddenLinks', JSON.stringify(hiddenLinks));
            }

            // Hızlı linki gizleme
            function hideQuickLink(event, element) {
                event.preventDefault();
                const id = element.dataset.id;
                element.style.display = "none"; // Sayfadan gizle
                const hiddenLink = document.createElement('div');
                hiddenLink.className = 'hidden-link';
                hiddenLink.dataset.id = id;
                hiddenLink.innerHTML = element.innerHTML;
                document.querySelector('#hiddenLinksModal .modal-body').appendChild(hiddenLink);
                saveHiddenLinks(); // Gizli linklerin durumunu kaydet
            }














            function showHiddenActions() {
                $(".quick-action-modal").css("display", "flex").hide().fadeIn();
            }

            function hideHiddenActions() {
                $(".quick-action-modal").fadeOut();
            }

            let quickActionModal = document.querySelector(".quick-action-modal");
            $(".quick-action-modal").on("click", function (e) {
                if (e.target == quickActionModal) {
                    hideHiddenActions();
                }
            })

            let quickActionsToggle = document.querySelector(".quick-actions-toggle");
            let quickActionsBody = document.querySelector(".quick-actions-body");

            quickActionsToggle.addEventListener("click", function () {
                quickActionsBody.classList.toggle("open");
            });







        </script>



        <div class="main-cards">
            <div class="profile-card">
                <div class="profile-avatar">
                    <img src="{% static 'go/images/profile.png' %}" alt="Profile">
                </div>
                <div class="profile-info">
                    <div class="profile-title">Johnathan William <span>Admin</span></div>
                    <div class="profile-date"><i class="icon icon-calendar"></i> 02/09/2024 - Pazartesi</div>
                </div>
            </div>
            <div class="stats-card">
                <div class="stats-title">{% trans 'GELİR' %}</div>
                <div class="stats-content">
                    <div class="stats-value">$20.500,99</div>
                    <div class="stats-rease">
                        <div class="stats-rease-icon"><i class="icon icon-increment"></i></div>
                         {% trans '<b>+40.1%</b> than last week' %}
                    </div>
                </div>
                <div class="stats-img">


                    <div id="stats-gelir"></div>

                    <script>
                        var options = {
                            series: [{
                                name: "{% trans 'Gelir' %}",
                                data: [100, 10, 80, 23]
                            }],
                            chart: {
                                width: 120,
                                height: 120,
                                type: 'line',
                                toolbar: {
                                    show: false
                                },
                                zoom: {
                                    enabled: false
                                },
                            },
                            dataLabels: {
                                enabled: false
                            },
                            stroke: {
                                curve: 'smooth',
                                colors: ['#22B076']
                            },
                            xaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0,
                                categories: ["Haziran", "Temmuz", "Ağustos", "Eylül"]
                            },
                            yaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0
                            },
                            grid: {
                                show: false
                            }
                        };


                        var chart = new ApexCharts(document.querySelector("#stats-gelir"), options);
                        chart.render();


                    </script>




                </div>
            </div>
            <div class="stats-card">
                <div class="stats-title">{% trans 'GİDER' %}</div>
                <div class="stats-content">
                    <div class="stats-value">$20.500,99</div>
                    <div class="stats-rease">
                        <div class="stats-rease-icon"><i class="icon icon-decrement"></i></div>
                        {% trans '<b>-40.1%</b> than last week' %}
                    </div>
                </div>
                <div class="stats-img">

                    <div id="stats-gider"></div>

                    <script>
                        var options = {
                            series: [{
                                name: "{% trans 'Gider' %}",
                                data: [100, 10, 80, 23]
                            }],
                            chart: {
                                width: 120,
                                height: 120,
                                type: 'line',
                                toolbar: {
                                    show: false
                                },
                                zoom: {
                                    enabled: false
                                },
                            },
                            dataLabels: {
                                enabled: false
                            },
                            stroke: {
                                curve: 'smooth',
                                colors: ['#26CFE3']
                            },
                            xaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0,
                                categories: ["Haziran", "Temmuz", "Ağustos", "Eylül"]
                            },
                            yaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0
                            },
                            grid: {
                                show: false
                            }
                        };


                        var chart = new ApexCharts(document.querySelector("#stats-gider"), options);
                        chart.render();


                    </script>


                </div>
            </div>
            <div class="weather-card">
                <div class="weather-location">
                    İstanbul
                    <span>Pazartesi</span>
                    <span>09:30 • 03/08</span>
                </div>
                <div class="weather-content">
                    <div class="weather-temp">
                        24°
                        <img src="{% static 'go/images/partly_cloudy_daytime.png' %}" alt="Parçalı Bulutlu">
                    </div>
                    <div class="weather-wind">
                        8 km/s
                        <img src="{% static 'go/images/wind.png' %}" alt="Rüzgar">
                    </div>
                </div>
            </div>
            <div class="stats-card">
                <div class="stats-title">{% trans 'BORÇ' %}</div>
                <div class="stats-content">
                    <div class="stats-value">$20.500,99</div>
                    <div class="stats-rease">
                        <div class="stats-rease-icon"><i class="icon icon-decrement"></i></div>
                        {% trans '<b>-40.1%</b> than last week' %}
                    </div>
                </div>
                <div class="stats-img">

                    <div id="stats-borc"></div>

                    <script>
                        var options = {
                            series: [{
                                name: "{% trans 'Borç' %}",
                                data: [100, 10, 80, 23]
                            }],
                            chart: {
                                width: 120,
                                height: 120,
                                type: 'line',
                                toolbar: {
                                    show: false
                                },
                                zoom: {
                                    enabled: false
                                },
                            },
                            dataLabels: {
                                enabled: false
                            },
                            stroke: {
                                curve: 'smooth',
                                colors: ['#26CFE3']
                            },
                            xaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0,
                                categories: ["Haziran", "Temmuz", "Ağustos", "Eylül"]
                            },
                            yaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0
                            },
                            grid: {
                                show: false
                            }
                        };


                        var chart = new ApexCharts(document.querySelector("#stats-borc"), options);
                        chart.render();


                    </script>


                </div>
            </div>
            <div class="register-card">
                <div class="register-card-title">
                    4
                    <span>{% trans 'Kasa' %}</span>
                </div>
                <div class="register-card-registers">
                    {% trans '<div class="register-card-register"><i class="icon icon-register"></i> KASA 1 <span>$
                            12.049,20</span></div>' %}
                </div>
            </div>
        </div>

        <div class="large-cards">
            <div class="large-stats-card">
                <div class="stats-header">
                    <div class="stats-title">{% trans 'Gelir - Gider Grafiği' %}</div>
                    <div class="stats-period-dropdown">
                        <div class="stats-period">{% trans 'Aylık' %}</div>
                        <div class="stats-period-content">
                            <a href="#">{% trans 'Aylık' %}</a>
                            <a href="#">{% trans 'Yıllık' %}</a>
                        </div>
                    </div>
                </div>
                <div id="gelirgider"></div>
            </div>
            <div class="large-stats-card expenses-by-category">
                <div class="stats-header">
                    <div class="stats-title">{% trans 'Kategorilere Göre Giderler' %}</div>
                </div>
                <div id="expenses-by-category"></div>
                <div class="stats-footer">
                    <div class="stats-footer-part">
                        <span>{% trans 'Kategori Sayısı' %}</span>
                        6
                    </div>
                    <div class="stats-footer-part">
                        <span>{% trans 'Toplam Gider' %}</span>
                        $18,765
                    </div>
                </div>
            </div>
        </div>

        <script>
            var options = {
                series: [{
                    name: '{% trans "Gelir" %}',
                    data: [31, 40, 28, 51, 42, 109, 100, 80, 90, 70, 60, 50]
                }, {
                    name: '{% trans "Gider" %}',
                    data: [11, 32, 45, 32, 34, 52, 41, 62, 51, 43, 34, 23]
                }],
                chart: {
                    height: 350,
                    type: 'area',
                    zoom: {
                        enabled: false
                    }
                },
                dataLabels: {
                    enabled: false
                },
                stroke: {
                    curve: 'smooth'
                },
                xaxis: {
                    type: 'category',
                    categories: [
                        'Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran',
                        'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'
                    ]
                },
                colors: ['#5FC396', '#FFAB00'],
                tooltip: {
                    x: {
                        format: 'MMM'
                    }
                }
            };

            var chart = new ApexCharts(document.querySelector("#gelirgider"), options);
            chart.render();




            var options = {
                series: [14, 23, 21, 17, 15, 10],
                labels: ['Personel', 'Yemekhane', 'İnşaat Malzemesi', 'Elektrik', 'Bakım', 'Onarım'],
                chart: {
                    type: 'polarArea',
                },
                stroke: {
                    colors: ['#fff']
                },
                fill: {
                    opacity: 0.8
                },
            };

            var chart = new ApexCharts(document.querySelector("#expenses-by-category"), options);
            chart.render();



        </script>


        <div class="large-cards">

            <div class="large-cards-main-row">
                <div class="large-stats-card table-card">
                    <div class="stats-header">
                        <div class="stats-title">{% trans 'Faturalar' %}</div>
                        <div class="stats-period-dropdown">
                            <div class="stats-period">{% trans 'Aylık' %}</div>
                            <div class="stats-period-content">
                                <a href="#">{% trans 'Aylık' %}</a>
                                <a href="#">{% trans 'Yıllık' %}</a>
                            </div>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table id="faturalar">
                            <thead>
                                <tr>
                                    <th>{% trans 'Fatura No' %}</th>
                                    <th>{% trans 'Ünvan' %}</th>
                                    <th>{% trans 'Telefon' %}</th>
                                    <th>{% trans 'Vade Tarihi' %}</th>
                                    <th>{% trans 'Fatura Tutarı' %}</th>
                                    <th>{% trans 'Durum' %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>INV-1708</td>
                                    <td>QUALITY DECOR</td>
                                    <td>0555 123 0000</td>
                                    <td>07 Aug 2022 <span class="time">4:00 PM</span></td>
                                    <td>$87.99</td>
                                    <td><span class="status-success">{% trans 'Ödendi' %}</span></td>
                                </tr>
                                <tr>
                                    <td>INV-1708</td>
                                    <td>QUALITY DECOR</td>
                                    <td>0555 123 0000</td>
                                    <td>07 Aug 2022 <span class="time">4:00 PM</span></td>
                                    <td>$87.99</td>
                                    <td><span class="status-pending">Beklemede</span></td>
                                </tr>
                                <tr>
                                    <td>INV-1708</td>
                                    <td>QUALITY DECOR</td>
                                    <td>0555 123 0000</td>
                                    <td>07 Aug 2022 <span class="time">4:00 PM</span></td>
                                    <td>$87.99</td>
                                    <td><span class="status-cancel">İptal Edildi</span></td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                    <div class="table-footer">
                        {% trans '<a href="#">Tümünü Gör <i class="icon icon-chevron-right"></i></a>' %}
                    </div>

                </div>

                <div class="large-stats-card table-card">
                    <div class="stats-header">
                        <div class="stats-title">{% trans 'Borç Faturaları' %}</div>
                        <div class="stats-period-dropdown">
                            <div class="stats-period">{% trans 'Aylık' %}</div>
                            <div class="stats-period-content">
                                <a href="#">{% trans 'Aylık' %}</a>
                                <a href="#">{% trans 'Yıllık' %}</a>
                            </div>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table id="borc-faturalar">
                            <thead>
                                <tr>
                                    <th>{% trans 'Fatura No' %}</th>
                                    <th>{% trans 'Ünvan' %}</th>
                                    <th>{% trans 'Telefon' %}</th>
                                    <th>{% trans 'Vade Tarihi' %}</th>
                                    <th>{% trans 'Fatura Tutarı' %}</th>
                                    <th>{% trans 'Durum' %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>INV-1708</td>
                                    <td>QUALITY DECOR</td>
                                    <td>0555 123 0000</td>
                                    <td>07 Aug 2022 <span class="time">4:00 PM</span></td>
                                    <td>$87.99</td>
                                    <td><span class="status-success">{% trans 'Ödendi' %}</span></td>
                                </tr>
                                <tr>
                                    <td>INV-1708</td>
                                    <td>QUALITY DECOR</td>
                                    <td>0555 123 0000</td>
                                    <td>07 Aug 2022 <span class="time">4:00 PM</span></td>
                                    <td>$87.99</td>
                                    <td><span class="status-pending">Beklemede</span></td>
                                </tr>
                                <tr>
                                    <td>INV-1708</td>
                                    <td>QUALITY DECOR</td>
                                    <td>0555 123 0000</td>
                                    <td>07 Aug 2022 <span class="time">4:00 PM</span></td>
                                    <td>$87.99</td>
                                    <td><span class="status-cancel">İptal Edildi</span></td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                    <div class="table-footer">
                    {% trans '<a href="#">Tümünü Gör <i class="icon icon-chevron-right"></i></a>' %}
                        
                    </div>

                </div>

                <div class="large-stats-card table-card">
                    <div class="stats-header">
                        <div class="stats-title">{% trans 'İş Emirleri' %}</div>
                        <div class="stats-period-dropdown">
                            <div class="stats-period">{% trans 'Tüm İş Emirleri' %}</div>
                            <div class="stats-period-content">
                                <a href="#">{% trans 'Tüm İş Emirleri' %}</a>
                            </div>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table id="gorevler">
                            <thead>
                                <tr>
                                    <th>{% trans 'Görev Adı' %}</th>
                                    <th>{% trans 'Açıklama' %}</th>
                                    <th>{% trans 'Atanmış Kişi' %}</th>
                                    <th>{% trans 'Bitiş Tarihi' %}</th>
                                    <th>{% trans 'Öncelik' %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Depo Düzenleme & Stok Sayımı</td>
                                    <td>Belirli bir sıraya göre malzemeler yerleştirilecek ve eksik veya fazla olan
                                        stoklar
                                        tespit edilerek kayıt a...</td>
                                    <td><img src="{% static 'go/images/avatar.png' %}"></td>
                                    <td>12/08/2024</td>
                                    <td><span class="status-success">Az</span></td>
                                </tr>
                                <tr>
                                    <td>Depo Düzenleme & Stok Sayımı</td>
                                    <td>Belirli bir sıraya göre malzemeler yerleştirilecek ve eksik veya fazla olan
                                        stoklar
                                        tespit edilerek kayıt a...</td>
                                    <td><img src="{% static 'go/images/avatar.png' %}"></td>
                                    <td>12/08/2024</td>
                                    <td><span class="status-pending">Orta</span></td>
                                </tr>
                                <tr>
                                    <td>Depo Düzenleme & Stok Sayımı</td>
                                    <td>Belirli bir sıraya göre malzemeler yerleştirilecek ve eksik veya fazla olan
                                        stoklar
                                        tespit edilerek kayıt a...</td>
                                    <td><img src="{% static 'go/images/avatar.png' %}"></td>
                                    <td>12/08/2024</td>
                                    <td><span class="status-cancel">Acil</span></td>
                                </tr>

                            </tbody>
                        </table>
                    </div>


                    <div class="table-footer">
                       {% trans '<a href="#">Tümünü Gör <i class="icon icon-chevron-right"></i></a>' %} 
                    </div>

                </div>
            </div>

            <script>
                let faturalar = new DataTable('#faturalar', {
                    paging: false,
                    searching: false,
                    info: false,
                    // responsive: true
                });

                let borcfaturalar = new DataTable('#borc-faturalar', {
                    paging: false,
                    searching: false,
                    info: false,
                    // responsive: true
                });

                let gorevler = new DataTable('#gorevler', {
                    paging: false,
                    searching: false,
                    info: false,
                    // responsive: true
                });
            </script>



            <div class="large-cards-second-row">

                <div class="card">
                    <div class="card-header">
                        {% trans '<a href="#" class="card-details">Detayını Gör <i class="icon icon-chevron-right"></i></a>' %}
                    </div>
                    <div class="card-body">
                        <img class="building-img" src="./content/images/bina.png' %}" alt="Bina">
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            {% trans 'Personeller' %}
                            <span>{% trans 'Toplam 182 personel' %}</span>
                        </div>
                        <a href="#"><i class="icon icon-plus"></i></a>
                    </div>
                    <div class="card-body">
                        <div class="employees">
                            <div class="employee">
                                <div class="employee-image"><img src="{% static 'go/images/avatar.png' %}" alt=""></div>
                                <div class="employee-details">
                                    Ahmet Yılmaz
                                    <span>ahmet@biada.com</span>
                                </div>
                                <div class="employee-stats">
                                    <span>Ay / Çalışma Saati</span>
                                    2450
                                </div>
                            </div>
                            <div class="employee">
                                <div class="employee-image"><img src="{% static 'go/images/avatar.png' %}" alt=""></div>
                                <div class="employee-details">
                                    Ahmet Yılmaz
                                    <span>ahmet@biada.com</span>
                                </div>
                                <div class="employee-stats">
                                    <span>Ay / Çalışma Saati</span>
                                    2450
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            {% trans '<a href="#" class="card-show-all">Tümünü Gör <i class="icon icon-forward"></i></a>' %}
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <div class="info-card-image">
                        <img src="{% static 'go/images/info-card-1.png' %}" alt="Aktif Şantiye Sayısı">
                    </div>
                    <div class="info-card-content">
                    {% trans '12 <span>Aktif Şantiye Sayısı</span>' %}
                        
                    </div>
                </div>

                <div class="info-card">
                    <div class="info-card-image">
                        <img src="{% static 'go/images/info-card-2.png' %}" alt="Aktif Personel Sayısı">
                    </div>
                    <div class="info-card-content">
                        {% trans '182 <span>Aktif Personel Sayısı</span>' %}
                    </div>
                </div>

                <div class="info-card">
                    <div class="info-card-image">
                        <img src="{% static 'go/images/info-card-3.png' %}" alt="Aktif Proje Sayısı">
                    </div>
                    <div class="info-card-content">
                        {% trans '202 <span>Aktif Proje Sayısı</span>' %}
                    </div>
                </div>

            </div>

        </div>



    </main>
{% else %} 

    <main>

        <div class="quick-actions">
            <div class="quick-actions-header">
                <div class="quick-actions-title">{% trans 'Hızlı Menü' %}</div>
                <div class="quick-actions-right">
                    <button class="quick-actions-add" onclick="showHiddenActions()">
                        <i class="icon icon-add"></i> {% trans 'Gizli Öğeler' %}
                    </button>
                    <div class="quick-actions-toggle">
                        <i class="icon icon-arrow-circle-up"></i>
                        <i class="icon icon-arrow-circle-down"></i>
                    </div>
                </div>
            </div>
            <div class="quick-actions-body open">
                <div class="quick-actions-inner">
                    <div class="quick-actions-grid" id="quick-actions-grid">
                        <a href="#" class="quick-action" data-id="1" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-document"></i> {% trans 'Raporlar' %}</a>
                        <a href="#" class="quick-action" data-id="2" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-ilerleme-takibi"></i>{% trans 'İlerleme Takibi' %} </a>
                        <a href="#" class="quick-action" data-id="3" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-giderler"></i> {% trans 'Giderler' %}</a>
                        <a href="#" class="quick-action" data-id="4" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-gelirler"></i>{% trans 'Gelirler' %} </a>
                        <a href="#" class="quick-action" data-id="5" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-muhasebe"></i>{% trans 'Borçlar' %} </a>
                        <a href="#" class="quick-action" data-id="6" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-puantaj-girisi"></i>{% trans 'Puantaj Girişi' %}</a>
                        <a href="#" class="quick-action" data-id="7" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-satin-alma"></i>{% trans 'Satın Alma' %}</a>
                        <a href="#" class="quick-action" data-id="8" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-yeni-personel"></i>{% trans 'Personel Ekle' %} </a>
                        <a href="#" class="quick-action" data-id="9" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-yeni-kullanici"></i> {% trans 'Kullanıcı Ekle' %}</a>
                        <a href="#" class="quick-action" data-id="10" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-dosya-yoneticisi"></i>{% trans 'Dosya Yöneticisi' %} </a>
                        <a href="#" class="quick-action" data-id="11" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-taseronlar"></i> {% trans 'Taşeronlar' %}</a>
                        <a href="#" class="quick-action" data-id="12" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-sozlesmeler"></i> {% trans 'Sözleşmeler' %}</a>
                        <a href="#" class="quick-action" data-id="13" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-hakedisler"></i> {% trans 'Hakedişler' %}</a>
                        <a href="#" class="quick-action" data-id="14" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-gorevler"></i> {% trans 'İş Emirleri' %}</a>
                        <a href="#" class="quick-action" data-id="15" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-kasa"></i> {% trans 'Kasa' %}</a>
                        <a href="#" class="quick-action" data-id="16" oncontextmenu="hideQuickLink(event, this)"><i
                                class="icon icon-users"></i> {% trans 'Cari Hesapları' %}</a>
                    </div>
                </div>
            </div>
        </div>


        <div class="quick-action-modal " id="hiddenLinksModal">
            <div class="quick-action-modal-content">
                <div class="quick-action-modal-header">
                    <span>{% trans 'Gizli Öğeler' %}</span>
                    <button onclick="hideHiddenActions()"><i class="icon icon-close"></i></button>
                </div>
                <div class="quick-actions-grid modal-body">
                </div>
            </div>
        </div>

        <script>

            const hiddenLinksModalBody = document.querySelector('#hiddenLinksModal .modal-body');
            document.addEventListener('DOMContentLoaded', function () {
                const quickLinks = document.getElementById('quick-actions-grid');
                const hiddenLinksModalBody = document.querySelector('#hiddenLinksModal .modal-body');

                // Hızlı linkleri sürükle-bırak düzenleme
                new Sortable(quickLinks, {
                    animation: 150,
                    handle: '.quick-action',
                    onEnd: function (evt) {
                        const items = Array.from(quickLinks.children);
                        const order = items.map(item => item.dataset.id);
                        sessionStorage.setItem('quickLinksOrder', JSON.stringify(order));
                    }
                });


                // Gizli linkleri modalda geri getirme
                hiddenLinksModalBody.addEventListener('click', function (event) {
                    const link = event.target.closest('.hidden-link');
                    if (link) {
                        const id = link.dataset.id;
                        const hiddenItem = document.querySelector(`[data-id="${id}"]`);
                        if (hiddenItem) {
                            hiddenItem.style.display = "flex"; // Linki geri görünür yap
                            quickLinks.appendChild(hiddenItem); // Sayfaya geri ekle
                            link.remove(); // Modaldan kaldır
                            saveHiddenLinks(); // Gizli linklerin durumunu kaydet
                        }
                    }
                });

                // Oturum açıldığında kullanıcı düzenini yükle
                const savedQuickLinksOrder = JSON.parse(sessionStorage.getItem('quickLinksOrder'));
                if (savedQuickLinksOrder) {
                    savedQuickLinksOrder.forEach(id => {
                        const item = quickLinks.querySelector(`[data-id='${id}']`);
                        if (item) {
                            quickLinks.appendChild(item);
                        }
                    });
                }

                // Gizli linklerin durumunu kaydet
                function saveHiddenLinks() {
                    const hiddenLinks = Array.from(hiddenLinksModalBody.querySelectorAll('.hidden-link')).map(link => link.dataset.id);
                    sessionStorage.setItem('hiddenLinks', JSON.stringify(hiddenLinks));
                }

                // Gizli linkleri yükleme
                function loadHiddenLinks() {
                    const hiddenLinks = JSON.parse(sessionStorage.getItem('hiddenLinks'));
                    if (hiddenLinks) {
                        hiddenLinks.forEach(id => {
                            const item = quickLinks.querySelector(`[data-id='${id}']`);
                            if (item) {
                                item.style.display = "none"; // Linki gizle
                                const hiddenLink = document.createElement('div');
                                hiddenLink.className = 'hidden-link';
                                hiddenLink.dataset.id = id;
                                hiddenLink.innerHTML = item.innerHTML;
                                hiddenLinksModalBody.appendChild(hiddenLink);
                            }
                        });
                    }
                }

                loadHiddenLinks(); // Gizli linkleri sayfa yüklendiğinde çağır
            });

            // Gizli linklerin durumunu kaydet
            function saveHiddenLinks() {
                const hiddenLinks = Array.from(hiddenLinksModalBody.querySelectorAll('.hidden-link')).map(link => link.dataset.id);
                sessionStorage.setItem('hiddenLinks', JSON.stringify(hiddenLinks));
            }

            // Hızlı linki gizleme
            function hideQuickLink(event, element) {
                event.preventDefault();
                const id = element.dataset.id;
                element.style.display = "none"; // Sayfadan gizle
                const hiddenLink = document.createElement('div');
                hiddenLink.className = 'hidden-link';
                hiddenLink.dataset.id = id;
                hiddenLink.innerHTML = element.innerHTML;
                document.querySelector('#hiddenLinksModal .modal-body').appendChild(hiddenLink);
                saveHiddenLinks(); // Gizli linklerin durumunu kaydet
            }














            function showHiddenActions() {
                $(".quick-action-modal").css("display", "flex").hide().fadeIn();
            }

            function hideHiddenActions() {
                $(".quick-action-modal").fadeOut();
            }

            let quickActionModal = document.querySelector(".quick-action-modal");
            $(".quick-action-modal").on("click", function (e) {
                if (e.target == quickActionModal) {
                    hideHiddenActions();
                }
            })

            let quickActionsToggle = document.querySelector(".quick-actions-toggle");
            let quickActionsBody = document.querySelector(".quick-actions-body");

            quickActionsToggle.addEventListener("click", function () {
                quickActionsBody.classList.toggle("open");
            });







        </script>



        <div class="main-cards">
            <div class="profile-card">
                <div class="profile-avatar">
                {% if request.user.image %}
                        <img src="{{request.user.image.url}}" style="max-width: 80px; max-height: 80px;" alt="Profile">

                        {% else %}
                        <img src="{% static 'go/images/profile.png' %}" alt="Profile">
                        {% endif %}
                    
                </div>
                <div class="profile-info">
                    <div class="profile-title">{{request.user.last_name}} <span>{{request.user.gorevi}}</span></div>
                    <div class="profile-date"><i class="icon icon-calendar"></i> 

  <span id="day-name"> </span><span id="fds">-</span>
  <span id="full-date"></span>
</div>
                    
                </div>
            </div>
            <div class="stats-card">
                <div class="stats-title">{% trans 'GELİR' %}</div>
                {% if request.user.kullanicilar_db %}
                {% gelirler_tutari request.user.kullanicilar_db as gelir_bilgisi_cek %}
                {% else %}
                {% gelirler_tutari request.user as gelir_bilgisi_cek %}
                {% endif %}
                <div class="stats-content">
                    <div class="stats-value"> $ {{gelir_bilgisi_cek.tutar}}</div>
                    <div class="stats-rease">
                        <div class="stats-rease-icon"><i class="icon icon-increment"></i></div>
                         {% trans '<b>+40.1%</b> than last week' %}
                    </div>
                </div>
                <div class="stats-img">


                    <div id="stats-gelir"></div>

                    <script>
                        var options = {
                            series: [{
                                name: "{% trans 'Gelir' %}",
                                data: [100, 10, 80, 23]
                            }],
                            chart: {
                                width: 120,
                                height: 120,
                                type: 'line',
                                toolbar: {
                                    show: false
                                },
                                zoom: {
                                    enabled: false
                                },
                            },
                            dataLabels: {
                                enabled: false
                            },
                            stroke: {
                                curve: 'smooth',
                                colors: ['#22B076']
                            },
                            xaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0,
                                categories: ["Haziran", "Temmuz", "Ağustos", "Eylül"]
                            },
                            yaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0
                            },
                            grid: {
                                show: false
                            }
                        };


                        var chart = new ApexCharts(document.querySelector("#stats-gelir"), options);
                        chart.render();


                    </script>




                </div>
            </div>
            <div class="stats-card">
                <div class="stats-title">{% trans 'GİDER' %}</div>
                {% if request.user.kullanicilar_db %}
                {% giderler_tutari request.user.kullanicilar_db  as gider_bilgisicekeme %}
                {% else %}
                {% giderler_tutari request.user  as gider_bilgisicekeme %}
                {% endif %}
                <div class="stats-content">
                    <div class="stats-value">$ {{gider_bilgisicekeme.genel_odeme2}}</div>
                    <div class="stats-rease">
                        <div class="stats-rease-icon"><i class="icon icon-decrement"></i></div>
                        {% trans '<b>-40.1%</b> than last week' %}
                    </div>
                </div>
                <div class="stats-img">

                    <div id="stats-gider"></div>

                    <script>
                        var options = {
                            series: [{
                                name: "{% trans 'Gider' %}",
                                data: [100, 10, 80, 23]
                            }],
                            chart: {
                                width: 120,
                                height: 120,
                                type: 'line',
                                toolbar: {
                                    show: false
                                },
                                zoom: {
                                    enabled: false
                                },
                            },
                            dataLabels: {
                                enabled: false
                            },
                            stroke: {
                                curve: 'smooth',
                                colors: ['#26CFE3']
                            },
                            xaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0,
                                categories: ["Haziran", "Temmuz", "Ağustos", "Eylül"]
                            },
                            yaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0
                            },
                            grid: {
                                show: false
                            }
                        };


                        var chart = new ApexCharts(document.querySelector("#stats-gider"), options);
                        chart.render();


                    </script>


                </div>
            </div>
            <div class="weather-card">
                <div class="weather-location">
                {{sehir}}
                <span id="day-names"></span><br>
                <span id="time-date"></span><br>
                </div>
                <div class="weather-content">
                    <div class="weather-temp">
                        {{weather_data.main.temp |stringformat:'.f'}}°
                        <img src="http://openweathermap.org/img/wn/{{icon}}@2x.png" alt="">
                    </div>
                    <div class="weather-wind">
                        {{weather_data.wind.speed}}<h5>km/s</h5>
                        <img src="{% static 'go/images/wind.png' %}" alt="Rüzgar">
                    </div>
                </div>
            </div>
            <div class="stats-card">
                <div class="stats-title">{% trans 'BORÇ' %}</div>
                {% basit_cikarma  gelir_bilgisi_cek.tutar gelir_bilgisi_cek.genel_odeme as gelir_islem_sonucu  %}
                                                    {% basit_cikarma  gider_bilgisicekeme.tutar gider_bilgisicekeme.genel_odeme as gider_islem_sonucu  %}
                                                    {% basit_cikarma  gelir_islem_sonucu gider_islem_sonucu as sonuc_Bilgisi  %}
                <div class="stats-content">
                    <div class="stats-value">${% mutlak_deger  sonuc_Bilgisi %}</div>
                    <div class="stats-rease">
                        <div class="stats-rease-icon"><i class="icon icon-decrement"></i></div>
                        {% trans '<b>-40.1%</b> than last week' %}
                    </div>
                </div>
                <div class="stats-img">

                    <div id="stats-borc"></div>

                    <script>
                        var options = {
                            series: [{
                                name: "{% trans 'Borç' %}",
                                data: [100, 10, 80, 23]
                            }],
                            chart: {
                                width: 120,
                                height: 120,
                                type: 'line',
                                toolbar: {
                                    show: false
                                },
                                zoom: {
                                    enabled: false
                                },
                            },
                            dataLabels: {
                                enabled: false
                            },
                            stroke: {
                                curve: 'smooth',
                                colors: ['#26CFE3']
                            },
                            xaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0,
                                categories: ["Haziran", "Temmuz", "Ağustos", "Eylül"]
                            },
                            yaxis: {
                                labels: {
                                    show: false
                                },
                                axisBorder: {
                                    show: false
                                },
                                axisTicks: {
                                    show: false
                                },
                                tickAmount: 0
                            },
                            grid: {
                                show: false
                            }
                        };


                        var chart = new ApexCharts(document.querySelector("#stats-borc"), options);
                        chart.render();


                    </script>


                </div>
            </div>
            <div class="register-card">
                <div class="register-card-title">
                    {% if kasa %}
                        {{ kasa|length }}
                    {% else %}
                        0
                    {% endif %}
                    <span>{% trans 'Kasa' %}</span>
                </div>
                <div class="register-card-registers">
                {% for i in kasa %}

                    <div class="register-card-register"><i class="icon icon-register"></i> {{i.kasa_adi}} <span>$
                            {% kasa_toplam i %}</span></div>
                {% endfor %}
                </div>
            </div>
        </div>
        {% if request.user.kullanicilar_db %}
         {% ozellikler request.user.kullanicilar_db as ozellikleri %}      
        {% else %}
        {% ozellikler request.user as ozellikleri %}                                            
        {% endif %}
        {% if request.user.is_authenticated %}
        {% if request.user.kullanicilar_db %}
         {% kategori_bilgi_ver request.user.kullanicilar_db as bilgi_cagir %}    
        {% else %}
        {% kategori_bilgi_ver request.user as bilgi_cagir %}                                           
        {% endif %}
            
            {% endif %}
        <div class="large-cards">
            <div class="large-stats-card">
                <div class="stats-header">
                    <div class="stats-title">{% trans 'Gelir - Gider Grafiği' %}</div>
                    <div class="stats-period-dropdown">
                        <div class="stats-period">{% trans 'Aylık' %}</div>
                        <div class="stats-period-content">
                            <a href="#">{% trans 'Aylık' %}</a>
                            <a href="#">{% trans 'Yıllık' %}</a>
                        </div>
                    </div>
                </div>
                <div id="gelirgider"></div>
            </div>
            <div class="large-stats-card expenses-by-category">
                <div class="stats-header">
                    <div class="stats-title">{% trans 'Kategorilere Göre Giderler' %}</div>
                </div>
                <div id="expenses-by-category"></div>
                <div class="stats-footer">
                    <div class="stats-footer-part">
                        <span>{% trans 'Kategori Sayısı' %}</span>
                        {{bilgi_cagir | length}}
                    </div>
                    <div class="stats-footer-part">
                        <span>{% trans 'Toplam Gider' %}</span>
                        ${{gider_bilgisicekeme.genel_odeme2}}
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            var options = {
                series: [{
                    name: '{% trans "Gelir" %}',
                    data: {{ozellikleri.gelir}}
                }, {
                    name: '{% trans "Gider" %}',
                    data: {{ozellikleri.gider}}
                }],
                chart: {
                    height: 350,
                    type: 'area',
                    zoom: {
                        enabled: false
                    }
                },
                dataLabels: {
                    enabled: false
                },
                stroke: {
                    curve: 'smooth'
                },
                xaxis: {
                    type: 'category',
                    categories: [ 
                        '{% trans "Ocak" %}', '{% trans "Şubat" %}', '{% trans "Mart" %}', '{% trans "Nisan" %}', '{% trans "Mayıs" %}', '{% trans "Haziran" %}',
                        '{% trans "Temmuz" %}', '{% trans "Ağustos" %}', '{% trans "Eylül" %}', '{% trans "Ekim" %}', '{% trans "Kasım" %}', '{% trans "Aralık" %}'
                    ]
                },
                colors: ['#5FC396', '#FFAB00'],
                tooltip: {
                    x: {
                        format: 'MMM'
                    }
                }
            };

            var chart = new ApexCharts(document.querySelector("#gelirgider"), options);
            chart.render();




            var options = {
                series: {{bilgi_cagir.a}},
                labels: {{bilgi_cagir.isimleri |safe}},
                chart: {
                    type: 'polarArea',
                },
                stroke: {
                    colors: ['#fff']
                },
                fill: {
                    opacity: 0.8
                },
            };

            var chart = new ApexCharts(document.querySelector("#expenses-by-category"), options);
            chart.render();



        </script>


        <div class="large-cards">

            <div class="large-cards-main-row">
                <div class="large-stats-card table-card">
                    <div class="stats-header">
                        <div class="stats-title">{% trans 'Faturalar' %}</div>
                        <div class="stats-period-dropdown">
                            <div class="stats-period">{% trans 'Aylık' %}</div>
                            <div class="stats-period-content">
                                <a href="#">{% trans 'Aylık' %}</a>
                                <a href="#">{% trans 'Yıllık' %}</a>
                            </div>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table id="faturalar">
                            <thead>
                                <tr>
                                    <th>{% trans 'Fatura No' %}</th>
                                    <th>{% trans 'Ünvan' %}</th>
                                    <th>{% trans 'Telefon' %}</th>
                                    <th>{% trans 'Vade Tarihi' %}</th>
                                    <th>{% trans 'Fatura Tutarı' %}</th>
                                    <th>{% trans 'Kalan Tutarı' %}</th>
                                    <th>{% trans 'Durum' %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in  bilgi %}
                                <tr>
                                    {% toplam_odenme_tutari i as odeme %}
                                    {% toplam_tutar_cikarmai i as tutar %}
                                    <td><h5 class="fs-13 my-1"><a  href="/{{dil}}{% url 'accounting:fatura_goster' i.id %}"  class="text-reset">{{i.fatura_no}}</a>
                                    </h5></td>
                                    <td>{{i.cari_bilgisi.cari_adi}}</td>
                                    <td>0555 123 0000</td>
                                    <td>{{i.vade_tarihi| date:'d.m.Y'}} <span class="time"></span></td>
                                    <td>${% toplam_tutar_cikarmai i %}</td>
                                    <td>
                                        ${% kalan_tutuari i %}
                                    </td>
                                    {% if  odeme == tutar %}
                                    <td><span class="status-success">{% trans "Ödendi" %}</span></td>
                                    {% elif odeme > 0 %}
                                    <td><span class="status-pending">{% trans "Beklemede" %}</span></td>
                                    {% elif odeme == 0 %}
                                    <td><span class="status-cancel">{% trans "Ödenmedi" %}</span></td>
                                    {% endif %}
                                    
                                    </tr>
                                    {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <div class="table-footer">
                        <a href="/{{dil}}{% url 'accounting:giderler_sayfasi'  %}">{% trans 'Tümünü Gör <i class="icon icon-chevron-right"></i>' %}</a>
                    </div>

                </div>

                <div class="large-stats-card table-card">
                    <div class="stats-header">
                        <div class="stats-title">{% trans 'Borç Faturaları' %}</div>
                        <div class="stats-period-dropdown">
                            <div class="stats-period">{% trans 'Aylık' %}</div>
                            <div class="stats-period-content">
                                <a href="#">{% trans 'Aylık' %}</a>
                                <a href="#">{% trans 'Yıllık' %}</a>
                            </div>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table id="borc-faturalar">
                            <thead>
                                <tr>
                                    <th>{% trans 'Fatura No' %}</th>
                                    <th>{% trans 'Ünvan' %}</th>
                                    <th>{% trans 'Telefon' %}</th>
                                    <th>{% trans 'Vade Tarihi' %}</th>
                                    <th>{% trans 'Fatura Tutarı' %}</th>
                                    <th>{% trans 'Kalan Tutarı' %}</th>
                                    <th>{% trans 'Durum' %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in  gider  %}
                                <tr>
                                    {% toplam_odenme_tutari i as odeme %}
                                    {% toplam_tutar_cikarmai i as tutar %}
                                    <td><h5 class="fs-13 my-1"><a  href="/{{dil}}{% url 'accounting:fatura_goster2' i.id %}"  class="text-reset">{{i.fatura_no}}</a>
                                    </h5></td>
                                    <td>{{i.cari_bilgisi.cari_adi}}</td>
                                    <td>0555 123 0000</td>
                                    <td>{{i.vade_tarihi| date:'d.m.Y'}} <span class="time"></span></td>
                                    <td>${% toplam_tutar_cikarmai i %}</td>
                                    <td>
                                        ${% kalan_tutuari i %}
                                    </td>
                                    {% if  odeme == tutar %}
                                    <td><span class="status-success">{% trans "Ödendi" %}</span></td>
                                    {% elif odeme > 0 %}
                                    <td><span class="status-pending">{% trans "Beklemede" %}</span></td>
                                    {% elif odeme == 0 %}
                                    <td><span class="status-cancel">{% trans "Ödenmedi" %}</span></td>
                                    {% endif %}
                                    
                                    </tr>
                                    {% endfor %}

                            </tbody>
                        </table>
                    </div>

                    <div class="table-footer">
                    <a href="/{{dil}}{% url 'accounting:giderler_sayfasi_borc'  %}">{% trans 'Tümünü Gör <i class="icon icon-chevron-right"></i>' %}</a>
                        
                    </div>

                </div>

                <div class="large-stats-card table-card">
                    <div class="stats-header">
                        <div class="stats-title">{% trans 'İş Emirleri' %}</div>
                        <div class="stats-period-dropdown">
                            <div class="stats-period">{% trans 'Tüm İş Emirleri' %}</div>
                            <div class="stats-period-content">
                                <a href="/{{dil}}{% url 'main:yapilacaklar' %}">{% trans 'Tüm İş Emirleri' %}</a>
                            </div>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table id="gorevler">
                            <thead>
                                <tr>
                                    <th>{% trans 'Görev Adı' %}</th>
                                    <th>{% trans 'Açıklama' %}</th>
                                    <th>{% trans 'Atanmış Kişi' %}</th>
                                    <th>{% trans 'Bitiş Tarihi' %}</th>
                                    <th>{% trans 'Öncelik' %}</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for i in son_gorevler %}
                                <tr>
                                    <td>{{i.title}}</td>
                                    <td>{{i.aciklama}}</td>
                                    <td>{% for yazar in i.yapacaklar.all %}
                                                       <a href="javascript: void(0);"
                                                        class="avatar-group-item"
                                                        data-img="{% if yazar.image %}{{yazar.image.url}}{% else %}{% static 'go/content/images/profile.png' %}{% endif %}"
                                                        data-bs-toggle="tooltip" data-bs-placement="top"
                                                        data-bs-title="{{yazar.last_name}}"> <img
                                                            src="{% if yazar.image %}{{yazar.image.url}}{% else %}{% static 'go/content/images/profile.png' %}{% endif %}" alt=""
                                                            class="rounded-circle avatar-xxs"> </a>
                                                {% endfor %}</td>
                                    <td>{{i.teslim_tarihi}}</td>
                                    <td>
                                    {% if i.oncelik_durumu == "High" %}
                                        <span class="status-danger">{{i.oncelik_durumu}}</span>
                                            {% elif i.oncelik_durumu == "Medium" %}
                                            
                                             <span class="status-warning">{{i.oncelik_durumu}}</span>
                                            {% elif i.oncelik_durumu == "Low" %}
                                            <span class="status-success">{{i.oncelik_durumu}}</span>
                                            {% endif %}</td>
                                </tr>
                                {% endfor %}
                                

                            </tbody>
                        </table>
                    </div>


                    <div class="table-footer">
                       <a href="/{{dil}}{% url 'main:yapilacaklar' %}">{% trans 'Tümünü Gör <i class="icon icon-chevron-right"></i>' %}</a> 
                    </div>

                </div>
            </div>

            <script>
                let faturalar = new DataTable('#faturalar', {
                    paging: false,
                    searching: false,
                    info: false,
                    // responsive: true
                });

                let borcfaturalar = new DataTable('#borc-faturalar', {
                    paging: false,
                    searching: false,
                    info: false,
                    // responsive: true
                });

                let gorevler = new DataTable('#gorevler', {
                    paging: false,
                    searching: false,
                    info: false,
                    // responsive: true
                });
            </script>



            <div class="large-cards-second-row">

                <div class="card">
                    <div class="card-header">
                        <a href="#" class="card-details">{% trans 'Detayını Gör <i class="icon icon-chevron-right"></i>' %}</a>
                    </div>
                    <div class="card-body">
                        <img class="building-img" src="./content/images/bina.png' %}" alt="Bina">
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            {% if request.user.kullanicilar_db %}
                            {% dashboard_bilgisi request.user.kullanicilar_db as personelbilgi %}    
                            {% else %}
                            {% dashboard_bilgisi request.user as personelbilgi %}                                          
                            {% endif %}
                                
                                
                            {% trans 'Personeller' %}
                            <span>{% blocktrans with personel_sayisi=personelbilgi.personel_sayisi %}
                                Toplam {{ personel_sayisi }} personel
                            {% endblocktrans %}</span>
                        </div>
                        <a href="/{{dil}}{% url 'users:personeller_sayfasi' %}"><i class="icon icon-plus"></i></a>
                    </div>
                    
                    <div class="card-body">
                    {% for i in personelbilgi.personeller %}
                        <div class="employees">
                            <div class="employee">
                                <div class="employee-image"><img src="{{i.resim}}" alt=""></div>
                                <div class="employee-details">
                                    {{i.isim_soyisim}}
                                    <span>{{i.telefon_numarasi}}</span>
                                </div>
                                <div class="employee-stats">
                                    <span>Ay / Çalışma Saati</span>
                                    {{i.toplam_calisma_saati}}
                                </div>
                            </div>
                            
                        </div>
                         {% endfor %}
                        <div class="card-footer">
                           <a href="/{{dil}}{% url 'users:personeller_sayfasi' %}" class="card-show-all"> {% trans 'Tümünü Gör <i class="icon icon-forward"></i>' %}</a>
                        </div>
                    </div>
                   
                </div>

                <div class="info-card">
                    <div class="info-card-image">
                        <img src="{% static 'go/images/info-card-1.png' %}" alt="Aktif Şantiye Sayısı">
                    </div>
                    <div class="info-card-content">
                    {% blocktrans with aktif_santiye=personelbilgi.aktif_santiye %}
                            {{ aktif_santiye }} <span>Aktif Şantiye Sayısı</span>
                            {% endblocktrans %}
                    
                        
                    </div>
                </div>

                <div class="info-card">
                    <div class="info-card-image">
                        <img src="{% static 'go/images/info-card-2.png' %}" alt="Aktif Personel Sayısı">
                    </div>
                    <div class="info-card-content">
                    {% blocktrans with personel_sayisi=personelbilgi.personel_sayisi %}
                            {{ personel_sayisi }} <span>Aktif Personel Sayısı</span>
                            {% endblocktrans %}
                       
                    </div>
                </div>

                <div class="info-card">
                    <div class="info-card-image">
                        <img src="{% static 'go/images/info-card-3.png' %}" alt="Aktif Proje Sayısı">
                    </div>
                    <div class="info-card-content">
                    {% blocktrans with aktif_proje=personelbilgi.aktif_proje %}
                            {{ aktif_proje }} <span>Aktif Proje Sayısı</span>
                            {% endblocktrans %}
                        
                    </div>
                </div>

            </div>

        </div>



    </main>
{% endif %}
<script>
    function updateWeatherClock() {
      // Dinamik long ve lat değerleri
      var longitude = parseFloat("{{ weather_data.coord.lon|default:0 }}"); // Boylam değeri (float'a çevrilir)
      var latitude = parseFloat("{{ weather_data.coord.lat|default:0 }}");  // Enlem değeri (float'a çevrilir)
    
      // Haftanın günleri
      var days = ["Pazar", "Pazartesi", "Salı", "Çarşamba", "Perşembe", "Cuma", "Cumartesi"];
      var now = new Date();
    
      // Gün, saat ve tarih bilgilerini al
      var dayName = days[now.getDay()];
      var hours = now.getHours();
      var minutes = now.getMinutes();
      var seconds = now.getSeconds();
      var day = now.getDate();
      var month = now.getMonth() + 1; // Aylar 0-11 arası olduğundan +1 eklenir.
      var year = now.getFullYear();
    
      // Dakika ve saniyeleri iki haneli göstermek için
      hours = hours < 10 ? '0' + hours : hours;
      minutes = minutes < 10 ? '0' + minutes : minutes;
      seconds = seconds < 10 ? '0' + seconds : seconds;
    
      // Saati "09:30:45" formatında göster
      var timeString = hours + ":" + minutes + ":" + seconds;
      
      // Tarihi "12/09/2024" formatında göster
      var fullDateString = day + "/" + month + "/" + year;
    
      // Dinamik olarak gün, saat ve tarih bilgilerini güncelle
      document.getElementById("day-name").textContent = dayName;
      document.getElementById("time-date").textContent = timeString;
      document.getElementById("full-date").textContent = fullDateString;
      document.getElementById("day-names").textContent = dayName;
 
    }
    
    // Her saniyede bir güncelleme
    setInterval(updateWeatherClock, 1000);
    
    // Sayfa yüklendiğinde saati güncelle
    updateWeatherClock();
</script>

    
{% endblock sidebar %}