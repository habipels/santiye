{% load static %}
{% load custom_tags %}
{% load i18n %}
<!doctype html>
<html lang="{{dil}}" data-layout="{{layout.data_layout}}" data-layout-style="{{layout_sitili.data_layout_style}}" data-layout-position="{{layout_pozisyonu.data_layout_position}}" data-topbar="{{topbar_color.data_topbar}}" data-sidebar="{{sidebar_rengi.data_sidebar}}" data-sidebar-size="{{sidebar_boyutu.data_sidebar_size}}" data-layout-width="{{layout_uzunlugu.data_layout_width}}" data-sidebar-visibility="{{side_bar_gorunum.data_sidebar_visibility}}" data-bs-theme="{{color_sheme.data_bs_theme}}" data-preloader="disable">
<head>
    <meta charset="utf-8" />
    <title>{{site_adi.site_adi_sekme_tr}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="{{site_adi.site_adi_genel}}" name="description" />
    <meta content="Habip ELİŞ" name="author" />
    <link rel="apple-touch-icon" sizes="57x57" href="{% static 'icon' %}/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="{% static 'icon' %}/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="{% static 'icon' %}/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'icon' %}/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="{% static 'icon' %}/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="{% static 'icon' %}/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="{% static 'icon' %}/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="{% static 'icon' %}/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'icon' %}/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="{% static 'icon' %}/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'icon' %}/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'icon' %}/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'icon' %}/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!-- App favicon -->
    <link rel="shortcut icon" href="{{sayfa_iconu.sayfa_icon.url}}">

    <!-- Layout config Js -->
    <script src="{% static 'assets/js/layout.js' %}"></script>
    <!-- Bootstrap Css -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="{% static 'assets/css/icons.min.css' %}" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="{% static 'assets/css/app.min.css' %}" rel="stylesheet" type="text/css" />
    <!-- custom Css-->
    <link href="{% static 'assets/css/custom.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'assets/css/custom.css' %}" rel="stylesheet" type="text/css" />

    <style>
        /* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5);
}

.modal-content {
    background-color: white;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 300px;
    border-radius: 8px;
}

.close-button {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close-button:hover,
.close-button:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}

.calculator {
    text-align: center;
}

#display {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    font-size: 24px;
    text-align: right;
}

.buttons button {
    width: 22%;
    padding: 15px;
    margin: 5px;
    font-size: 18px;
    border: none;
    background-color: #f0f0f0;
    cursor: pointer;
    border-radius: 4px;
}

.buttons button:hover {
    background-color: #d4d4d4;
}

    </style>
    {% block head %}

    {% endblock head %}
<style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f9;
            color: #333;
        }

        .modal-content {
            border-radius: 10px;
            padding: 20px;
            background-color: #f4f4f4;
            max-width: 500px;
            margin: auto;
            border: 1px solid #ccc;
        }

        .modal-header {
            border-bottom: none;
            position: relative;
            background-color: #2c2c2c;
            padding: 10px 20px;
            color: #f4f4f4;
            border-radius: 10px 10px 0 0;
        }

        .modal-header h5 {
            font-weight: bold;
            color: #f4f4f4;
            margin: 0;
        }

        .modal-body {
            background-color: #f4f4f4;
            color: #333;
            padding: 20px;
            border-radius: 0 0 10px 10px;
        }

        .shortcut-list {
            list-style: none;
            padding-left: 0;
        }

        .shortcut-list li {
            margin-bottom: 10px;
            font-size: 16px;
            color: #333;
        }

        .shortcut-list li span {
            font-weight: bold;
            color: #2c2c2c;
        }

        .close {
            position: absolute;
            right: 10px;
            top: 10px;
            font-size: 24px;
            color: #f4f4f4;
            cursor: pointer;
        }

        .info-text {
            font-size: 14px;
            margin-bottom: 15px;
            color: #555;
        }
                .custom-context-menu {
            display: none;
            position: absolute;
            background-color: #2c2c2c;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            min-width: 160px;
            padding: 0;
            overflow: hidden;
        }

         .custom-context-menu {
            display: none;
            position: absolute;
            background-color: #2c2c2c;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            min-width: 160px;
            padding: 0;
            overflow: hidden;
        }

        .custom-context-menu ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .custom-context-menu ul li {
            padding: 10px 15px;
            color: #e0e0e0;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .custom-context-menu ul li:hover {
            background-color: #24d6b6;
            color: #fff;
        }

        .custom-context-menu ul li:active {
            background-color: #1ba892;
            color: #fff;
        }
    </style>
</head>
<body>

  <!-- Modal -->
    <div id="shortcutModal" class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans 'Kısayol Tuşları' %}</h5>
                    <span class="close" onclick="closeShortcutModal()">&times;</span>
                </div>
                <div class="modal-body">
                    <p class="info-text"><strong>Mac:</strong> Command + Shift + Tuş | <strong>Windows:</strong> Ctrl + Shift + Tuş</p>
                    <ul class="shortcut-list">
                        <li><span>F:</span> {% trans 'Fatura ekleme sayfası' %}</li>
                        <li><span>B:</span> {% trans 'Borçlar sayfası' %}</li>
                        <li><span>R:</span> {% trans 'Gider raporu sayfası' %}</li>
                        <li><span>D:</span> {% trans 'Dosya yöneticisi' %}</li>
                        <li><span>G:</span> {% trans 'Bir önceki sayfaya dön (veriler kaybolmaz)' %}</li>
                        <li><span>K:</span> {% trans 'Kısayol listesini aç' %}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
<div id="layout-wrapper">
{% block header %}

    {% include "page_include/header.html" %}

    <!-- END layout-wrapper -->
{% endblock header %}
{% block slider %}

{% endblock slider %}
{% block content %}

{% endblock content %}
{% block sidebar %}

{% endblock sidebar %}
</div>
{% block footer %}


{% endblock footer %}

<!-- JAVASCRIPT -->
    <script>
        function openShortcutModal() {
            document.getElementById('shortcutModal').style.display = 'block';
        }

        function closeShortcutModal() {
            document.getElementById('shortcutModal').style.display = 'none';
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'k' && event.shiftKey && (event.metaKey || event.ctrlKey)) {
                event.preventDefault();
                openShortcutModal();
            }
        });

        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") {
                closeShortcutModal();
            }
        });
    </script>


    <script src="{% static 'assets/libs/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'assets/libs/simplebar/simplebar.min.js' %}"></script>
    <script src="{% static 'assets/libs/node-waves/waves.min.js' %}"></script>
    <script src="{% static 'assets/libs/feather-icons/feather.min.js' %}"></script>
    <script src="{% static 'assets/js/pages/plugins/lord-icon-2.1.0.js' %}"></script>
    <script src="{% static 'assets/js/plugins.js' %}"></script>

    <!-- apexcharts -->
    <script src="{% static 'assets/libs/apexcharts/apexcharts.min.js' %}"></script>

    <!-- piecharts init
    <script src="{% static 'assets/js/pages/apexcharts-pie.init.html' %}"></script>
-->
    <!-- apexcharts init -->
    <script src="{% static 'assets/js/pages/apexcharts-column.init.js' %}"></script>

    <!-- projects js -->
    <script src="{% static 'assets/js/pages/dashboard-projects.init.js' %}"></script>

    <!-- App js -->
    <script src="{% static 'assets/js/app.js' %}"></script>
        <!-- JAVASCRIPT -->

    <!-- dropzone min -->
    <script src="{% static 'assets/libs/dropzone/dropzone-min.js' %}"></script>

    <!--file Upload-->
    <script src="{% static 'assets/js/pages/form-file-upload.init.js' %}"></script>


    <!-- listjs init -->
    <script src="{% static 'assets/js/pages/listjs.init.js' %}"></script>

    <!-- Sweet Alerts js -->
    <script src="{% static 'assets/libs/sweetalert2/sweetalert2.min.js' %}"></script>
    <script>
    {% if request.user.is_authenticated %}
        {% if request.user.kullanicilar_db %}
         {% kategori_bilgi_ver request.user.kullanicilar_db as bilgi_cagir %}    
    {% else %}
       {% kategori_bilgi_ver request.user as bilgi_cagir %}                                           
    {% endif %}
         
         {% endif %}
function getChartColorsArray(e) {
    if (null !== document.getElementById(e))
        return (
            (e = document.getElementById(e).getAttribute("data-colors")),
            (e = JSON.parse(e)).map(function (e) {
                var t = e.replace(" ", "");
                return -1 === t.indexOf(",")
                    ? getComputedStyle(document.documentElement).getPropertyValue(t) || t
                    : 2 == (e = e.split(",")).length
                    ? "rgba(" + getComputedStyle(document.documentElement).getPropertyValue(e[0]) + "," + e[1] + ")"
                    : t;
            })
        );
}
var upadatedonutchart,
    chartPieBasicColors = getChartColorsArray("simple_pie_chart"),
    chartDonutBasicColors =
        (chartPieBasicColors &&
            ((options = {
                series: {{bilgi_cagir.a}},
                chart: { height: 300, type: "pie" },
                labels: {{bilgi_cagir.isimleri |safe}},
                legend: { position: "right" },
                dataLabels: { dropShadow: { enabled: !1 } },
                colors: {{bilgi_cagir.renk |safe}},
            }),
            (chart = new ApexCharts(document.querySelector("#simple_pie_chart"), options)).render()),

        getChartColorsArray("simple_dount_chart")),
        chartDonutupdatingColors =
        (chartDonutBasicColors &&
            ((options = {
                series: {{bilgi_cagir.a}},
                chart: { height: 300, type: "donut" },
                labels:{{bilgi_cagir.isimleri |safe}},
                legend: { position: "right" },
                dataLabels: { dropShadow: { enabled: !1 } },
                colors: {{bilgi_cagir.renk |safe}}
            }),
            (chart = new ApexCharts(document.querySelector("#simple_dount_chart"), options)).render()),
        getChartColorsArray("updating_donut_chart"));
    </script>
<script>
    function disableButton(form) {
        const button = form.querySelector('button[type="submit"]');
        button.disabled = true;  // Submit butonunu devre dışı bırakır
        // Formun gerçekten gönderilmesini sağlamak için true döner
        return true;
    }
</script>

<script>// Kısayollar
document.addEventListener('keydown', function(event) {
    const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;

    // Fatura Ekle (Command/Ctrl + Shift + F)
    if ((isMac && event.metaKey || !isMac && event.ctrlKey) && event.shiftKey && event.key.toLowerCase() === 'f') {
        event.preventDefault();
        window.location.href = '/{{dil}}{% url "accounting:gider_ekle" %}';
    }

    // Borçlar Sayfası (Command/Ctrl + Shift + B)
    if ((isMac && event.metaKey || !isMac && event.ctrlKey) && event.shiftKey && event.key.toLowerCase() === 'b') {
        event.preventDefault();
        window.location.href = '/{{dil}}{% url "accounting:giderler_sayfasi_borc" %}';
    }

    // Geri Git (Command/Ctrl + Shift + G)
    if ((isMac && event.metaKey || !isMac && event.ctrlKey) && event.shiftKey && event.key.toLowerCase() === 'g') {
        event.preventDefault();
        history.back();
    }

    // Dosya Yöneticisi (Command/Ctrl + Shift + D)
    if ((isMac && event.metaKey || !isMac && event.ctrlKey) && event.shiftKey && event.key.toLowerCase() === 'd') {
        event.preventDefault();
        window.location.href = '/{{dil}}{% url "main:depolama_sistemim" %}';
    }

    // Gider Raporu (Command/Ctrl + Shift + R)
    if ((isMac && event.metaKey || !isMac && event.ctrlKey) && event.shiftKey && event.key.toLowerCase() === 'r') {
        event.preventDefault();
        window.location.href = '/{{dil}}{% url "accounting:giderler_ozeti" %}';
    }


});

</script>
<script>//sesion ile verileri tutuyoruz
document.querySelector('form').addEventListener('input', function() {
    const formData = new FormData(this);
    const data = {};
    formData.forEach((value, key) => {
        data[key] = value;
    });
    sessionStorage.setItem('formData', JSON.stringify(data));
});

</script>
<script>
$(document).ready(function() {
    // DataTables zaten başlatılmışsa mevcut tabloyu yeniden başlatmaya çalışmayın
    if (!$.fn.DataTable.isDataTable('#example')) {
        var table = $('#example').DataTable({
            stateSave: true, // Tablo durumu kaydedilir
            // DataTable ayarları buraya
            stateSaveCallback: function(settings, data) {
                // DataTable state verisini sessionStorage'da sakla
                sessionStorage.setItem('DataTables_' + settings.sInstance, JSON.stringify(data));
            },
            stateLoadCallback: function(settings) {
                // DataTable state verisini sessionStorage'dan geri yükle
                return JSON.parse(sessionStorage.getItem('DataTables_' + settings.sInstance));
            }
        });

        // Genel arama filtreleme verisini kaydetme
        table.on('search.dt', function() {
            var searchValue = table.search();
            sessionStorage.setItem('globalSearch', searchValue);
        });

        // Sütun filtreleme verilerini kaydetme
        table.columns().every(function(index) {
            var column = this;
            $('input', this.header()).on('keyup change', function() {
                column.search(this.value).draw();
                sessionStorage.setItem('columnSearch_' + index, this.value);
            });
        });

        // Sayfa yüklendiğinde genel arama ve sütun filtreleme durumlarını geri yükleme
        var savedSearch = sessionStorage.getItem('globalSearch');
        if (savedSearch) {
            table.search(savedSearch).draw();
        }

        table.columns().every(function(index) {
            var savedColumnSearch = sessionStorage.getItem('columnSearch_' + index);
            if (savedColumnSearch) {
                this.search(savedColumnSearch).draw();
                $('input', this.header()).val(savedColumnSearch);
            }
        });

        // Sayfa yüklendiğinde DataTable state verilerini geri yükleme
        var state = table.state.loaded();
        if (state) {
            table.page(state.start).draw('page');
            table.search(state.search.search).draw();
            table.columns().every(function(index) {
                var colSearch = state.columns[index].search.search;
                if (colSearch) {
                    this.search(colSearch).draw();
                    $('input', this.header()).val(colSearch);
                }
            });
        }
    }

    // Formdaki verileri sessionStorage'da tutma
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('input', function() {
            const formData = new FormData(this);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });
            sessionStorage.setItem('formData', JSON.stringify(data));
        });

        // Sayfa yüklendiğinde form verilerini geri yükleme
        const savedFormData = sessionStorage.getItem('formData');
        if (savedFormData) {
            const data = JSON.parse(savedFormData);
            for (let key in data) {
                const input = form.querySelector(`[name="${key}"]`);
                if (input) {
                    input.value = data[key];
                }
            }
        }
    }
});
</script>

       


{% block javascriptcode %}



{% endblock javascriptcode %}
{% block javascriptcodeadd %}

{% endblock javascriptcodeadd %}

    <!-- Modal -->
    <div id="calculatorModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <div class="calculator">
                <input type="text" id="display" disabled>
                <div class="buttons">
                    <button onclick="appendNumber('1')">1</button>
                    <button onclick="appendNumber('2')">2</button>
                    <button onclick="appendNumber('3')">3</button>
                    <button onclick="appendNumber('+')">+</button>
                    <button onclick="appendNumber('4')">4</button>
                    <button onclick="appendNumber('5')">5</button>
                    <button onclick="appendNumber('6')">6</button>
                    <button onclick="appendNumber('-')">-</button>
                    <button onclick="appendNumber('7')">7</button>
                    <button onclick="appendNumber('8')">8</button>
                    <button onclick="appendNumber('9')">9</button>
                    <button onclick="appendNumber('*')">*</button>
                    <button onclick="appendNumber('0')">0</button>
                    <button onclick="clearDisplay()">C</button>
                    <button onclick="calculate()">=</button>
                    <button onclick="appendNumber('/')">/</button>
                </div>
            </div>
        </div>
    </div>
<script>
   // Açılır modalı yakala
const modal = document.getElementById("calculatorModal");

// Butonu yakala
const btn = document.getElementById("slackButton");

// Kapatma düğmesini yakala
const closeBtn = document.getElementsByClassName("close-button")[0];

// Butona tıklayınca modalı aç
btn.onclick = function() {
    modal.style.display = "block";
    document.addEventListener('keydown', handleKeyPress);
}

// Kapatma düğmesine tıklayınca modalı kapat
closeBtn.onclick = function() {
    modal.style.display = "none";
    document.removeEventListener('keydown', handleKeyPress);
}

// Modal dışına tıklayınca modalı kapat
window.onclick = function(event) {
    if (event.target === modal) {
        modal.style.display = "none";
        document.removeEventListener('keydown', handleKeyPress);
    }
}

// Hesap makinesi fonksiyonları
function appendNumber(number) {
    document.getElementById("display").value += number;
}

function clearDisplay() {
    document.getElementById("display").value = "";
}

function calculate() {
    try {
        document.getElementById("display").value = eval(document.getElementById("display").value);
    } catch (e) {
        document.getElementById("display").value = "Error";
    }
}

// Klavye olaylarını yakala
function handleKeyPress(event) {
    const key = event.key;
    if (/[0-9]/.test(key)) {
        appendNumber(key);
    } else if (key === '+' || key === '-' || key === '*' || key === '/') {
        appendNumber(key);
    } else if (key === 'Enter') {
        calculate();
    } else if (key === 'Escape') {
        clearDisplay();
    } else if (key === 'Backspace') {
        const display = document.getElementById("display");
        display.value = display.value.slice(0, -1);
    }
}


</script>
</body>
</html>