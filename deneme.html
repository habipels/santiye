
{% extends "homebase.html" %}
{% load i18n %}
{% load custom_tags %}
{% load static %}
{% block slider %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/css/multi-select-tag.css">
    <script src="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/js/multi-select-tag.js"></script>
<!--Multi Select Date Picker Calender-->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <script src="{% static 'assets/js/layout.js' %}"></script>
    <!-- Bootstrap Css -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
    <!-- Icons Css -->
    <link href="{% static 'assets/css/icons.min.css' %}" rel="stylesheet" type="text/css">
    <!-- App Css-->
    <link href="{% static 'assets/css/app.min.css' %}" rel="stylesheet" type="text/css">
    <!-- custom Css-->
    <link href="{% static 'assets/css/custom.min.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'assets/css/custom.css' %}" rel="stylesheet" type="text/css">
    <!--Multi Select Date Picker Calender-->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/css/multi-select-tag.css">
    <script src="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/js/multi-select-tag.js"></script>
<!--Multi Select Date Picker Calender-->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <script src="{% static 'assets/js/layout.js' %}"></script>
    <!-- Bootstrap Css -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
    <!-- Icons Css -->
    <link href="{% static 'assets/css/icons.min.css' %}" rel="stylesheet" type="text/css">
    <!-- App Css-->
    <link href="{% static 'assets/css/app.min.css' %}" rel="stylesheet" type="text/css">
    <!-- custom Css-->
    <link href="{% static 'assets/css/custom.min.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'assets/css/custom.css' %}" rel="stylesheet" type="text/css">
    <!--Multi Select Date Picker Calender-->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


<style>/* SearchBuilder'ın daha düzgün ve estetik görünümü */
    .dataTables_wrapper .searchBuilderContainer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #dee2e6;
        border-radius: 5px;
        background-color: #f8f9fa;
        position: relative;
    }
    
    .dataTables_wrapper .searchBuilderContainer .dt-buttons {
        margin-left: 10px;
    }
    
    .dataTables_wrapper .searchBuilderContainer .searchBuilder {
        flex-grow: 1;
    }
    
    .dataTables_wrapper .searchBuilderContainer .dt-buttons {
        display: flex;
        justify-content: flex-end;
        margin-left: auto;
    }
    
    /* Temizle butonunun SearchBuilder'ın yanına yerleşimi */
    .dataTables_wrapper .searchBuilderContainer .searchBuilder-clearAll {
        margin-left: 10px;
    }
    
    /* Modal düzenlemeleri */
    .modal-content {
        border-radius: 5px;
    }
    
    .modal-header {
        background-color: #343a40;
        color: white;
    }
    
    .modal-body {
        padding: 20px;
    }
    
    /* DataTables tablolarının genel düzenlemeleri */
    table.dataTable {
        width: 100% !important;
        margin: 0 auto;
        clear: both;
        border-collapse: separate !important;
        border-spacing: 0 10px !important;
    }
    
    table.dataTable thead th {
        background-color: #003643;
        color: white;
        text-align: center;
    }
    
    table.dataTable tbody td {
        text-align: center;
        vertical-align: middle;
    }
    
    </style>
<!-- ============================================================== -->

            <div class="container-fluid">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                            <h4 class="mb-sm-0">{% trans "Gelir Faturaları Özeti" %}</h4>
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">{% trans "Dashboard" %}</a></li>
                                    <li class="breadcrumb-item active">{% trans "Gelir Faturaları Özeti" %}</li>
                                </ol>
                            </div>
                        </div>
                
                <!-- end page title -->

                <div class="row">
                    <div class="col-lg-12">
                        <div class="card" id="invoiceList">
                            
                            <div class="card-body bg-light-subtle border border-dashed border-start-0 border-end-0">
                            </div>
                            <div class="card-body">
                                <div>
                                    <div class="table-responsive table-card">
                                        <table id="example" class="display nowrap" style="width:100%">
                                            <thead>
                                                <tr>
                                                    
                                                    <th>{% trans "Fatura No" %}</th>
                                                    <th>{% trans "Cari" %}</th>
                                                    <th>{% trans "Açıklama" %}</th>
                                                    <th>{% trans "Etiket 1" %}</th>
                                                    <th>{% trans "Etiket 2" %}</th>
                                                    <th>{% trans "Etiket 3" %}</th>
                                                    <th>{% trans "Fatura Tarihi" %}</th>
                                                    <th>{% trans "Vade Tarihi" %}</th>
                                                    <th>{% trans "Fatura Bedeli" %}</th>
                                                    <th>{% trans "Kalan Tutar" %}</th>
                                                    <th>{% trans "DURUM" %}</th>
                                                    <th>{% trans "İşlemler" %}</th>
                                                </tr>
                                            </thead>
                                            <tfoot>
                                                <tr>
                                                    
                                                    <th>{% trans "Fatura No" %}</th>
                                                    <th>{% trans "Cari" %}</th>
                                                    <th>{% trans "Açıklama" %}</th>
                                                    <th>{% trans "Etiket 1" %}</th>
                                                    <th>{% trans "Etiket 2" %}</th>
                                                    <th>{% trans "Etiket 3" %}</th>
                                                    <th>{% trans "Fatura Tarihi" %}</th>
                                                    <th>{% trans "Vade Tarihi" %}</th>
                                                    <th>{% trans "Fatura Bedeli" %}</th>
                                                    <th>{% trans "Kalan Tutar" %}</th>
                                                    <th>{% trans "DURUM" %}</th>
                                                    <th>{% trans "İşlemler" %}</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                        <div class="noresult" style="display: none">
                                            <div class="text-center">
                                                <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop" colors="primary:#121331,secondary:#08a88a" style="width:75px;height:75px">
                                                </lord-icon>
                                                <h5 class="mt-2">Sorry! No Result Found</h5>
                                                <p class="text-muted mb-0">We've searched more than 150+ invoices We did not find any
                                                    invoices for you search.</p>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                        
                            </div>
                        </div>
                    </div>
                    <!--end col-->
                </div>
                <!--end row-->
            </div>
        </div>
        <div class="invoice-detail-modal" id="invoice-detail-modal">
           
        </div>
        <div id="tahsilat-makbuzu-modal" class="tahsilat-makbuzu-modal">
          
        </div>
      
        <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-6">
                        <script>document.write(new Date().getFullYear())</script> © {{site_adi.footer}}
                    </div>
                    <div class="col-sm-6">
                        <div class="text-sm-end d-none d-sm-block">

                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- end main content-->
<div id="fatura_silme_divi">

</div>
{% endblock slider %}
{% block footer %}


<!--start back-to-top-->

<link href="https://cdn.datatables.net/2.1.3/css/dataTables.dataTables.css" rel="stylesheet" type="text/css" />
<link href="https://cdn.datatables.net/searchbuilder/1.7.1/css/searchBuilder.dataTables.css" rel="stylesheet" type="text/css" />
<link href="https://cdn.datatables.net/datetime/1.5.3/css/dataTables.dateTime.min.css" rel="stylesheet" type="text/css" />

<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.datatables.net/2.1.3/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/searchbuilder/1.7.1/js/dataTables.searchBuilder.js"></script>
<script src="https://cdn.datatables.net/searchbuilder/1.7.1/js/searchBuilder.dataTables.js"></script>
<script src="https://cdn.datatables.net/datetime/1.5.3/js/dataTables.dateTime.min.js"></script>
<!-- DataTables Buttons JS -->
<script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js"></script>
<!-- DataTables SearchBuilder ve DateTime CSS -->
<link href="https://cdn.datatables.net/searchbuilder/1.7.1/css/searchBuilder.dataTables.min.css" rel="stylesheet" type="text/css" />
<link href="https://cdn.datatables.net/datetime/1.5.3/css/dataTables.dateTime.min.css" rel="stylesheet" type="text/css" />
<!-- DataTables CSS -->
<link href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />

<!-- DataTables Buttons CSS -->
<link href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css" rel="stylesheet" type="text/css" />
<!-- Export işlemleri için JSZip ve pdfmake -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script>
$(document).ready(function () {
    var table = $('#example').DataTable({
        data: [
        {% for i in santiyeler_i %}
        
     {
            'fatura_no': '{{ i.fatura_no|escapejs }}',
            'cari': '{{ i.cari_bilgisi.cari_adi|escapejs }}',
            'aciklama': '<span class="monospace-bold" title="{% if i.aciklama %}{{ i.aciklama|escapejs }}{% else %}{% endif %}">  {% if i.aciklama %}{{ i.aciklama|slice:":15"|escapejs }} {% endif %}</span>',
            'etiket1': '{% if i.gelir_etiketi_sec.all|length > 0 %}{{ i.gelir_etiketi_sec.all.0.gelir_etiketi_adi|escapejs }}{% endif %}',
            'etiket2': '{% if i.gelir_etiketi_sec.all|length > 1 %}{{ i.gelir_etiketi_sec.all.1.gelir_etiketi_adi|escapejs }}{% endif %}',
            'etiket3': '{% if i.gelir_etiketi_sec.all|length > 2 %}{{ i.gelir_etiketi_sec.all.2.gelir_etiketi_adi|escapejs }}{% endif %}',
            'duzenleme_tarihi': '{{ i.fatura_tarihi|date:"d.m.Y"|escapejs }}',
            'vade_tarihi': '{{ i.vade_tarihi|date:"d.m.Y"|escapejs }}',
            'fatura_bedeli': "${{ i.toplam_tutar|stringformat:'.2f'|escapejs }}",
            'kalan_tutar': "${{ i.kalan_tutar|stringformat:'.2f'|escapejs }}",
            'durum': '{% if i.toplam_tutar == i.kalan_tutar %}Ödenmedi{% elif i.kalan_tutar == 0.00 %}Ödendi{% elif i.kalan_tutar < i.toplam_tutar %}Parçalı Ödendi{% endif %}',
            'islemler': '<div class="dropdown">' +
                        '<button class="btn btn-soft-secondary btn-sm dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">' +
                        '<i class="ri-more-fill align-middle"></i>' +
                        '</button>' +
                        '<ul class="dropdown-menu dropdown-menu-end" style="">' +
                        '<li><a href="/{{ dil }}{% url 'accounting:fatura_goster' i.id %}" class="dropdown-item" onclick="ViewInvoice(this);" data-id="{{ i.id }}">' +
                        '<i class="ri-eye-fill align-bottom me-2 text-muted"></i>' +
                        '{% trans "View" %}</a></li>' +
                        '<li><a href="/{{ dil }}{% url 'accounting:gelir_duzenle' i.id %}" class="dropdown-item" onclick="EditInvoice(this);" data-id="{{ i.id }}">' +
                        '<i class="ri-pencil-fill align-bottom me-2 text-muted"></i>' +
                        '{% trans "Edit" %}</a></li>' +
                        '<li><a href="/{{ dil }}{% url 'accounting:fatura_goster' i.id %}" class="dropdown-item">' +
                        '<i class="ri-download-2-line align-bottom me-2 text-muted"></i>' +
                        '{% trans "Download" %}</a></li>' +
                        '</ul>' +
                        '</div>'
        }
        {% if not forloop.last %},{% endif %}
        
        
        {% endfor %}
        ],
        columns: [
            
            { data: 'fatura_no' },
            { data: 'cari' },
            { data: 'aciklama' },
            { data: 'etiket1' },
            { data: 'etiket2' },
            { data: 'etiket3' },
            { data: 'duzenleme_tarihi' },
            { data: 'vade_tarihi' },
            { data: 'fatura_bedeli' },
            { data: 'kalan_tutar' },
            { data: 'durum' },
            { data: 'islemler' }
        ],
        language: { 
            searchBuilder: {
                add: '{% trans "search builder add" %}',
                clearAll: '{% trans "search builder clearAll" %}',
                condition: '{% trans "search builder condition" %}',
                data: '{% trans "search builder data" %}',
                deleteTitle: '{% trans "search builder deleteTitle" %}',
                logicAnd: '{% trans "search builder logicAnd" %}',
                logicOr: '{% trans "search builder logicOr" %}',
                title: {
                    _: '{% trans "search builder Filtreler (%d)" %}',
                    0: '{% trans "search builder Filtreler" %}'
                },
                value: '{% trans "search builder Değer" %}',
                column: '{% trans "search builder column" %}',
                condition: '{% trans "search builder condition" %}',
                operator: '{% trans "search builder operator" %}',
                conditions: {
                    // Örnek koşullar, ihtiyacınıza göre düzenleyebilirsiniz
                    string: {
                        contains: '{% trans "search builder contains" %}',
                        not: '{% trans "search builder not" %}',
                        empty: '{% trans "search builder empty" %}',
                        equals: '{% trans "search builder equals" %}',
                        notEquals: '{% trans "search builder notEquals" %}',
                        startsWith: '{% trans "search builder startswith" %}',
                        doesNotStartWith: '{% trans "search builder doesnotstartwith" %}',
                        doesNotContrain: '{% trans "search builder doesnotcontrain" %}',
                        endsWith: '{% trans "search builder endswith" %}',
                        doesNotEndWith: '{% trans "search builder doesnotendwith" %}',
                        notEmpty: '{% trans "search builder notempty" %}'
                        
                    },
                    date: {
                        before: '{% trans "search builder before" %}',
                        after: '{% trans "search builder after" %}',
                        between: '{% trans "search builder between" %}',
                        empty: '{% trans "search builder empty" %}',
                        equals: '{% trans "search builder equals" %}',
                        notBetween: '{% trans "search builder notBetween" %}'
                    },
                    number: {
                        lessThan: '{% trans "search builder lessThan" %}',
                        lessThanEqual: '{% trans "search builder lessThanEqual" %}',
                        greaterThan: '{% trans "search builder greaterThan" %}',
                        greaterThanEqual: '{% trans "search builder greaterThanEqual" %}',
                        between: '{% trans "search builder between" %}',
                        empty: '{% trans "search builder empty" %}',
                        equals: '{% trans "search builder equals" %}',
                        notBetween: '{% trans "search builder notBetween" %}'
                    },
                    array: {
                        contains: '{% trans "search builder contains" %}',
                        not: '{% trans "search builder not" %}',
                        empty: '{% trans "search builder empty" %}',
                        equals: '{% trans "search builder equals" %}',
                        notEquals: '{% trans "search builder notEquals" %}',
                        startsWith: '{% trans "search builder startswith" %}',
                        doesNotStartWith: '{% trans "search builder doesnotstartwith" %}',
                        doesNotContrain: '{% trans "search builder doesnotcontrain" %}',
                        endsWith: '{% trans "search builder endswith" %}',
                        doesNotEndWith: '{% trans "search builder doesnotendwith" %}',
                        notEmpty: '{% trans "search builder notempty" %}'
                    }
                }
            }
        },
        dom: '<"row align-items-center"' +
                '<"col-sm-3 d-flex gap-2"B>' +  // Butonlar
                '<"col-sm-4"Q>' +              // Custom Search
                '<"col-sm-2"l>' +              // Satır Gösterme
                '<"col-sm-3"f>' +              // Arama Kutusu
             '>' +
             'rt' +
             '<"row"<"col-sm-5"i><"col-sm-7"p>>',
          buttons: [
            '{% trans "copy" %}', '{% trans "csv" %}', '{% trans "excel" %}', '{% trans "pdf" %}', '{% trans "print" %}',
            
        ],
        
    });
});


</script>




    
{% endblock footer %}


